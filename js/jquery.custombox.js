(function(l,m,h,j){var i="custombox",k={url:null,cache:false,escKey:true,eClose:null,zIndex:9999,overlay:true,overlayColor:"#000",overlayOpacity:0.8,overlayClose:true,overlaySpeed:200,customClass:null,width:null,height:null,effect:"fadein",position:null,speed:600,open:null,complete:null,close:null,responsive:true,scrollbar:false,error:"Error 404!"};function n(a,b){this.element=a;if(typeof this.element==="object"&&typeof b==="object"&&isNaN(b.zIndex)&&b.zIndex==="auto"){b.zIndex=(this._isIE()?k.zIndex:this._zIndex())}this.settings=this._extend({},k,b);if(typeof this.element==="object"){this._box.init(this)}else{this[this.element]()}}n.prototype={_overlay:function(){var b=this._hexToRgb(this.settings.overlayColor),a={};if(navigator.appVersion.indexOf("MSIE 8.")!=-1){a.backgroundColor=this.settings.overlayColor;a.zIndex=parseFloat(this.settings.zIndex)+1;a.filter="alpha(opacity="+this.settings.overlayOpacity*100+")"}else{a["background-color"]="rgba("+b.r+","+b.g+", "+b.b+","+this.settings.overlayOpacity+")";a["z-index"]=parseFloat(this.settings.zIndex)+1;a.transition="all "+this.settings.overlaySpeed/1000+"s"}h.getElementsByTagName("body")[0].appendChild(this._create({id:"overlay",eClass:"overlay"},a))},_box:{init:function(a){if(a.settings.open&&typeof a.settings.open==="function"){a.settings.open(j!==arguments[0]?arguments[0]:"")}if(a.settings.url===null){if(a.element!==null){a.settings.url=a.element.getAttribute("href")}}if(typeof a.settings.url==="string"){if(a.settings.url.charAt(0)==="#"||a.settings.url.charAt(0)==="."){if(h.querySelector(a.settings.url)){a._box.build(a,h.querySelector(a.settings.url).cloneNode(true))}else{a._box.build(a,null)}}else{this.ajax(a)}}else{a._box.build(a,null)}},create:function(a){var b={};if(a._isIE()){b.zIndex=parseFloat(a.settings.zIndex)+2}else{b["z-index"]=parseFloat(a.settings.zIndex)+2}var c=a._create({id:"modal",eClass:"modal "+a._box.effect(a)+(a.settings.customClass?" "+a.settings.customClass:"")},b),d=a._create({id:"modal-content",eClass:"modal-content"},{"transition-duration":a.settings.speed+"ms"});c.appendChild(d);h.body.insertBefore(c,h.body.firstChild);if(a.settings.overlay){a._overlay()}return[c,d]},effect:function(f){var c=["slide","flip","rotate"],t=["letmein","makeway","slip","blur"],a=i+"-"+f.settings.effect,e="";if(f.settings.position!==null&&f.settings.position.indexOf(",")!==-1){f.settings.position=f.settings.position.split(",");if(f.settings.position.length>1){e=" "+i+"-"+f.settings.effect+"-"+f.settings.position[0].replace(/^\s+|\s+$/g,"")+"-"+f.settings.position[1].replace(/^\s+|\s+$/g,"")}}for(var d=0,g=c.length;d<g;d++){if(c[d]===f.settings.effect){a=i+"-"+f.settings.effect+"-"+(e!==""?f.settings.position[0]:f.settings.position)+e}}for(var b=0,s=t.length;b<s;b++){if(t[b]===f.settings.effect){if(f.settings.effect!=="blur"){f._addClass(h.getElementsByTagName("html")[0],"perspective")}var u=h.createElement("div");u.className=i+"-container";while(h.body.firstChild){u.appendChild(h.body.firstChild)}h.body.appendChild(u)}}return a},build:function(x,D){var e=h.body,f=h.documentElement,b=(f&&f.scrollTop||e&&e.scrollTop||0);if(x.settings.error!==false&&typeof x.settings.error==="string"){if(D===null){D=h.createElement("div");x._addClass(D,"error");D.innerHTML=x.settings.error}var w=x._box.create(x);w[1].appendChild(D);D.style.display="block";w[0].setAttribute("data-"+i+"-scroll",b);var A={width:parseInt(x.settings.width,0),height:parseInt(x.settings.height,0)};if(!isNaN(A.width)&&A.width===x.settings.width&&A.width.toString()===x.settings.width.toString()&&A.width!==null){D.style.width=A.width+"px"}if(!isNaN(A.height)&&A.height===x.settings.height&&A.height.toString()===x.settings.height.toString()&&A.height!==null){D.style.height=A.height+"px"}var d=D.offsetWidth,g={"margin-left":-d/2+"px",width:d+"px"};if(x._isIE()){var z=D.offsetHeight;g["margin-top"]=-z/2+"px";g.height=z+"px"}if(x.settings.position!==null&&x.settings.position.indexOf("top")!==-1){g.transform="none"}x._create({},g,w[0]);var c={width:"innerWidth" in m?m.innerWidth:h.documentElement.offsetWidth,height:"innerHeight" in m?m.innerHeight:h.documentElement.offsetHeight};if(!x.settings.scrollbar){if(D.offsetHeight<c.height&&e.offsetHeight>c.height){var C=x._create({},{visibility:"hidden",width:"100px"});e.appendChild(C);var y=C.offsetWidth;C.style.overflow="scroll";var B=x._create({},{width:"100%"});C.appendChild(B);var a=B.offsetWidth;C.parentNode.removeChild(C);e.style.marginRight=y-a+"px";x._addClass(h.getElementsByTagName("html")[0],"hide-scrollbar")}else{x._scrollbar(w[0])}}else{x._scrollbar(w[0])}if(x.settings.responsive){x._box.responsive(x,w,D,c)}setTimeout(function(){x._listeners(b);w[0].className+=" "+i+"-show";var o=w[1].getElementsByTagName("script");for(var q=0,p=o.length;q<p;q++){new Function(o[q].text)()}if(m.attachEvent){setTimeout(function(){if(x.settings.complete&&typeof x.settings.complete==="function"){x.settings.complete(j!==arguments[0]?arguments[0]:"")}},x.settings.speed)}else{var r=true;w[0].addEventListener(x._crossBrowser(),function(){if(r){r=false;if(x.settings.complete&&typeof x.settings.complete==="function"){x.settings.complete(j!==arguments[0]?arguments[0]:"")}}},false)}},(x.settings.overlay?x.settings.overlaySpeed:200))}},responsive:function(g,d,a,e){a.setAttribute("data-"+i+"-width",a.offsetWidth);g._create({},{width:"auto"},a);if(e.width<a.offsetWidth){g._create({},{width:e.width-40+"px","margin-left":"20px","margin-right":"20px",left:0},d[0])}var f="onorientationchange" in m,b=f?"orientationchange":"resize";if(m.attachEvent){m.attachEvent(b,function(){c(this)},false)}else{m.addEventListener(b,function(){c(this)},false)}var c=function(q){if(typeof m.orientation==="undefined"){if(a.getAttribute("data-"+i+"-width")!==null){var r=a.getAttribute("data-"+i+"-width");if(r>q.innerWidth){g._create({},{width:q.innerWidth-40+"px","margin-left":"20px","margin-right":"20px",left:0},d[0])}else{g._create({},{width:r+"px","margin-left":-r/2+"px",left:"50%"},d[0])}}}else{g._create(null,{width:q.innerWidth-40+"px","margin-left":"20px","margin-right":"20px",left:0},d[0])}}},ajax:function(b){var a=new XMLHttpRequest();a.onreadystatechange=function(){var d=4;if(a.readyState===d){if(a.status===200){var c=h.createElement("div");c.innerHTML=a.responseText;b._box.build(b,c)}else{b._box.build(b,null)}}};a.open("GET",b.settings.url+(!b.settings.cache?"?_="+new Date().getTime():""),true);a.setRequestHeader("X-Requested-With","XMLHttpRequest");a.send(null)}},_close:function(){var a=this;setTimeout(function(){a._removeClass(h.getElementsByTagName("html")[0],i+"-hide-scrollbar");h.getElementsByTagName("body")[0].style.marginRight=0;var b=(a._isIE()?h.querySelectorAll("."+i+"-modal")[0]:h.getElementsByClassName(i+"-modal")[0]);a._remove(b);if(a.settings.overlay){a._remove((a._isIE()?h.querySelectorAll("."+i+"-overlay")[0]:h.getElementsByClassName(i+"-overlay")[0]))}if(a.settings.close&&typeof a.settings.close==="function"){a.settings.close(j!==arguments[0]?arguments[0]:"")}else{if(typeof b!=="undefined"&&b.getAttribute("data-"+i)!==null){var d=b.getAttribute("data-"+i),c=new Function("onClose","return "+d)(d);c()}}m.top.scroll(0,b.getAttribute("data-"+i+"-scroll"))},a.settings.speed);a._addClass((a._isIE()?h.querySelectorAll("."+i+"-modal")[0]:h.getElementsByClassName(i+"-modal")[0]),"close");a._removeClass((a._isIE()?h.querySelectorAll("."+i+"-modal")[0]:h.getElementsByClassName(i+"-modal")[0]),i+"-show");a._removeClass(h.getElementsByTagName("html")[0],i+"-perspective")},_listeners:function(){var a=this;if(a._isIE()){if(typeof h.querySelectorAll("."+i+"-overlay")[0]!=="undefined"&&a.settings.overlayClose){h.querySelectorAll("."+i+"-overlay")[0].attachEvent("onclick",function(){a._close()})}}else{if(typeof h.getElementsByClassName(i+"-overlay")[0]!=="undefined"&&a.settings.overlayClose){h.getElementsByClassName(i+"-overlay")[0].addEventListener("click",function(){a._close()},false)}}if(a.settings.escKey){h.onkeydown=function(d){d=d||m.event;if(d.keyCode===27){a._close()}}}if(a.settings.eClose!==null&&typeof a.settings.eClose==="string"&&a.settings.eClose.charAt(0)==="#"||typeof a.settings.eClose==="string"&&a.settings.eClose.charAt(0)==="."&&h.querySelector(a.settings.eClose)){h.querySelector(a.settings.eClose).addEventListener("click",function(){a._close()},false)}if(a.settings.close&&typeof a.settings.close==="function"){var c=a.settings.close;var b=(a._isIE()?h.querySelectorAll("."+i+"-modal")[0]:h.getElementsByClassName(i+"-modal")[0]);b.setAttribute("data-"+i,c)}},_extend:function(){for(var a=1,c=arguments.length;a<c;a++){for(var b in arguments[a]){if(arguments[a].hasOwnProperty(b)){arguments[0][b]=arguments[a][b]}}}return arguments[0]},_create:function(c,a,e){var r=(e===j||e===null?h.createElement("div"):e);Object.keys=Object.keys||function(o){var t=[];for(var p in o){if(o.hasOwnProperty(p)){t.push(p)}}return t};if(c!==null&&Object.keys(c).length!==0){if(c.id!==null){r.id=i+"-"+c.id}if(c.eClass!==null){this._addClass(r,c.eClass)}}if(a!==null){for(var f in a){if(a.hasOwnProperty(f)){if(this._isIE()){var q=f.split("-");if(q.length>1){q=q[0]+q[1].replace(/(?:^|\s)\w/g,function(o){return o.toUpperCase()})}r.style[q]=a[f]}else{r.style.setProperty(f,a[f],null)}if((f.indexOf("transition")!==-1||f==="transform"!==-1)&&!this._isIE()){var d=["-webkit-","-ms-"];for(var b=0,g=d.length;b<g;b++){r.style.setProperty(d[b]+f,a[f],null)}}}}}return r},_hexToRgb:function(a){var b=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;a=a.replace(b,function(d,f,g,e){return f+f+g+g+e+e});var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return c?{r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16)}:null},_addClass:function(a,b){if(!this._hasClass(a,b)){a.className=(a.className.length&&a.className!==" "?a.className+" "+i+"-"+b:i+"-"+b)}},_removeClass:function(b,c){if(this._hasClass(b,c)){var a=new RegExp("(\\s|^)"+c+"(\\s|$)");b.className=b.className.replace(a," ")}},_hasClass:function(a,b){return(a!==j?a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)")):false)},_remove:function(a){if(a!==j){a.parentNode.removeChild(a)}},_zIndex:function(){var f=h,e=f.getElementsByTagName("*"),d=0;for(var b=0,a=e.length;b<a;b++){var c=f.defaultView.getComputedStyle(e[b],null).getPropertyValue("z-index");if(c>d&&c!=="auto"){d=c}}return d},_isIE:function(){return navigator.appVersion.indexOf("MSIE 9.")!=-1||navigator.appVersion.indexOf("MSIE 8.")!=-1},_crossBrowser:function(){var c=h.createElement("fakeelement"),b={transition:"transitionend",WebkitTransition:"webkitTransitionEnd"},a;for(var d in b){if(b.hasOwnProperty(d)&&c.style[d]!==j){a=b[d]}}return a},_scrollbar:function(b){var a=this;setTimeout(function(){m.scrollTo(0,0)},(a.settings.overlay?a.settings.overlaySpeed:200));var c={position:"absolute"};if(a.settings.position!==null&&a.settings.position.indexOf("top")!==-1){c.top=0;c["margin-top"]="20px"}a._create({},c,b)},close:function(){this._close()}};l.fn[i]=function(c){var d=arguments,a=typeof HTMLElement==="object"?c instanceof HTMLElement:c&&typeof c==="object"&&c!==null&&c.nodeType===1&&typeof c.nodeName==="string";if(c===j||typeof c==="object"){if(a){if(navigator.appName==="Microsoft Internet Explorer"){var b=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(b.exec(navigator.userAgent)!=null){var e=parseInt(RegExp.$1)}}if(typeof e==="undefined"||e>=10){if(c.getAttribute("data-"+i)!==null&&parseInt(c.getAttribute("data-"+i))+1>Math.round(new Date().getTime()/1000)){return}c.setAttribute("data-"+i,Math.round(new Date().getTime()/1000))}l(c).each(function(){l.data(this,i,new n(this,d[1]))})}else{new n(null,d[0])}}else{if(typeof c==="string"&&c==="close"){l.data(this,i,new n(d[0],d[1]))}}}})(jQuery,window,document);